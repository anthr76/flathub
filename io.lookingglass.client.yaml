---
app-id: io.lookingglass.client
branch: stable
runtime: org.freedesktop.Platform
runtime-version: '20.08'
sdk: org.freedesktop.Sdk
command: looking-glass-client
finish-args:
- "--share=ipc"
- "--device=dri"
- "--socket=x11"
- "--socket=wayland"
- "--share=network"
- "--device=shm"
modules:
- name: spice-protocol
  buildsystem: meson
  sources:
  - type: archive
    url: https://www.spice-space.org/download/releases/spice-protocol/spice-protocol-0.14.0.tar.bz2
    sha256: b6a4aa1ca32668790b45a494bbd000e9d05797b391d5a5d4b91adf1118216eac
- name: looking-glass-client
  buildsystem: cmake
  build-commands:
  - install -Dm755 /usr/lib/$(gcc -print-multiarch)/libbfd-*.so -t ${FLATPAK_DEST}/lib
  - install -Dm644 ../resources/icon-128x128.png /app/share/icons/hicolor/128x128/apps/io.lookingglass.client.png
  subdir: client
  sources:
  - type: git
    url: https://github.com/gnif/LookingGlass.git
    tag: B3
    commit: 2973319bff80bf1531265bdbec6707bdda3f40eb
- name: looking-glass-extra
  buildsystem: simple
  sources:
  - type: file
    path: io.lookingglass.client.desktop
  build-commands:
  - install -Dm644 io.lookingglass.client.desktop -t /app/share/applications